"use strict";(self.webpackChunkHDesign=self.webpackChunkHDesign||[]).push([[8673],{49057:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _workspaces_h_design_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15558),_workspaces_h_design_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_workspaces_h_design_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52136),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(69979);function useMasonryCards(_ref){var gap=_ref.gap,col=_ref.col,currentItemMinWidth=_ref.currentItemMinWidth,currentItemMaxWidth=_ref.currentItemMaxWidth,children=_ref.children,child=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function(){return children instanceof Array?children:[children]},[children]),colChilds=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function(){var colHeightArray=Array.from({length:col}).map(function(){return 0}),colArray=Array.from({length:col}).map(function(){return[]});return child.forEach(function(item){var _item$props,_ratio,_colArray$currentMinI,_colArray$currentMinI2,ratio=item==null||(_item$props=item.props)===null||_item$props===void 0?void 0:_item$props.ratio;typeof ratio=="string"&&(ratio=eval(ratio));var minHeight=Math.min.apply(Math,_workspaces_h_design_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(colHeightArray)),currentMinIdx=colHeightArray.findIndex(function(z){return z===minHeight});colHeightArray[currentMinIdx]=colHeightArray[currentMinIdx]+1/((_ratio=ratio)!==null&&_ratio!==void 0?_ratio:1),(_colArray$currentMinI=colArray[currentMinIdx])===null||_colArray$currentMinI===void 0||(_colArray$currentMinI2=_colArray$currentMinI.push)===null||_colArray$currentMinI2===void 0||_colArray$currentMinI2.call(_colArray$currentMinI,item)}),colArray},[child,col]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"flex",style:{gap},children:Array.from({length:col}).map(function(z,P){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"flex",style:{gap,flexWrap:"nowrap",flexShrink:0,flexDirection:"column",width:"calc(".concat(100/col,"% - ").concat((col-1)*gap/col,"px)"),minWidth:currentItemMinWidth,maxWidth:currentItemMaxWidth},key:P,children:colChilds[P]})})})}__webpack_exports__.Z=useMasonryCards},18673:function(z,P,k){k.r(P),k.d(P,{AutoRatioContainer:function(){return oe},CheckContainer:function(){return ce},HighlightTextarea:function(){return Re},Masonry:function(){return ke},ScrollContainer:function(){return De},Sidebar:function(){return $e},SimpleImg:function(){return Xe},Skeleton:function(){return je},VideoFrameViewer:function(){return rr},downloadBase64Imgs:function(){return br},getBase64Type:function(){return re},getRandomColor:function(){return Rr},isBase64Image:function(){return Cr},useDebounce:function(){return J},useDebounceState:function(){return nr},useMutation:function(){return ir},useResize:function(){return Z},useSticky:function(){return sr},useThrottle:function(){return fr},useThrottleState:function(){return mr},useVideoFrames:function(){return q}});var te=k(82092),U=k.n(te),ne=k(26068),A=k.n(ne),ae=k(48305),L=k.n(ae),D=k(4814),c=k(52136),x=k(69979),ie=(0,c.forwardRef)(function(t,e){var a=t.ratio,r=a===void 0?1:a,i=t.children,l=t.className,u=l===void 0?"":l,s=t.boxStyle,n=t.boxClassName,o=n===void 0?"":n,d=t.style,m=(0,c.useRef)(null),f=(0,c.useRef)(null),h=(0,c.useState)("width"),v=L()(h,2),_=v[0],R=v[1],y=(0,c.useCallback)(function(M){var p,g,b=M.contentRect,E=b.width,C=b.height,w=(p=(g=M.target.firstChild).getBoundingClientRect)===null||p===void 0?void 0:p.call(g),I=w.width,T=w.height;R(function(){return r===1?E>C?"height":"width":C<=0?"height":E<=0?"width":E/C>I/T?"height":"width"})},[r]),S=Z(y,m,{needRequestAnimationFrame:!1});return(0,c.useEffect)(function(){return function(){return S()}},[]),(0,c.useImperativeHandle)(e,function(){return{containerRef:m,boxRef:f}},[]),(0,x.jsx)("div",{className:(0,D.Z)("auto-ratio-container",u),style:d,ref:m,children:(0,x.jsx)("div",{className:(0,D.Z)("auto-ratio-box",o),style:A()(A()({},s!=null?s:{}),{},U()({aspectRatio:"".concat(r)},_,"100%")),children:i})})}),oe=ie,ue=(0,c.forwardRef)(function(t,e){var a=t.className,r=a===void 0?"":a,i=t.style,l=t.children,u=t.checked,s=u===void 0?!1:u,n=t.onClick,o=t.radius,d=o===void 0?8:o,m=t.strokeWidth,f=m===void 0?2:m,h=t.gap,v=h===void 0?2:h,_=t.size,R=_===void 0?16:_,y=t.type,S=y===void 0?"radio":y,M=t.mode,p=M===void 0?"checked":M,g=(0,c.useMemo)(function(){switch(S){case"radio":return(0,x.jsx)("div",{className:(0,D.Z)("radio-check",{checked:s})});case"checkbox":return(0,x.jsx)("div",{className:(0,D.Z)("checkbox-check",{checked:s})});default:return null}},[S,s]),b=(0,c.useMemo)(function(){if(!g)return null;switch(p){case"hover":return(0,x.jsx)("div",{className:"hover-element",children:g});case"checked":return(0,x.jsx)("div",{className:"check-element",style:{opacity:s?1:void 0},children:g});case"always":return(0,x.jsx)("div",{className:"always-element",children:g})}},[p,g]),E=(0,c.useRef)(null);return(0,c.useImperativeHandle)(e,function(){return{containerRef:E}},[]),(0,x.jsxs)("div",{className:(0,D.Z)("check-container",r,{checked:s}),onClick:function(){return n==null?void 0:n(!s)},style:A()(A()({},i),{},{"--check-container-radius":"".concat(d,"px"),"--check-container-stoke":"".concat(f,"px"),"--check-container-gap":"".concat(v,"px"),"--check-container-size":"".concat(R,"px")}),ref:E,children:[l,b]})}),ce=ue,se=k(67825),G=k.n(se);function le(t){var e=t.value,a=t.onChange,r=(0,c.useState)(e!=null?e:""),i=L()(r,2),l=i[0],u=i[1],s=(0,c.useCallback)(function(n){if(a)return a(n);u(n.target.value)},[a]);return(0,c.useEffect)(function(){return u(e)},[e]),{currentValue:l,handlerChange:s}}var de=le,fe=k(15558),K=k.n(fe);function he(t){var e=t.value,a=t.textareaRef,r=t.elementList,i=(0,c.useCallback)(function(u){u.target===u.currentTarget&&a.current&&(a.current.focus(),a.current.setSelectionRange(e.length,e.length))},[e]),l=(0,c.useCallback)(function(u){var s=window.getSelection(),n=K()(u.currentTarget.children),o=n.findIndex(function(v){return v===u.target}),d=r.filter(function(v,_){return _<(o>-1?o:r.length-1)}).reduce(function(v,_){return v+_.msg.length},0);if(s&&s.rangeCount>0&&a.current){var m=s.getRangeAt(0),f=m.startOffset+d,h=m.endOffset+d;a.current.focus(),a.current.setSelectionRange(f,h)}},[r]);return{handlerContainerClick:i,handlerBoxClick:l}}var me=he,ve=[];function ge(t){var e=t.value,a=e===void 0?"":e,r=t.highlight,i=r===void 0?ve:r,l=t.formatHighlight,u=(0,c.useMemo)(function(){var n=[];return K()(a).reduce(function(o,d){o.str=o.str+d,n[o.idx]={type:o.type,msg:o.str};var m=i.some(function(f){return o.str.includes(f)?(o.type=f,!0):!1});return m&&(n[o.idx].msg=o.str.split(o.type)[0],n.push({type:o.type,msg:o.type}),o.idx=o.idx+2,o.str="",o.type="default"),o},{str:"",idx:0,type:"default"}),n},[a,i]),s=u.map(function(n,o){var d=null;switch(!0){case(u.length-1===o&&n.msg.includes(`
`)):{d=(0,x.jsxs)("span",{children:[n.msg,(0,x.jsx)("br",{})]});break}case n.type==="default":{d=(0,x.jsx)("span",{children:n.msg});break}case!!l:{d=l(n.msg);break}default:d=(0,x.jsx)("span",{style:{color:"blue"},children:n.msg})}return(0,x.jsx)(c.Fragment,{children:d},n.msg+o)});return{element:s,elementList:u}}var pe=ge,be=["className","style","value","onChange","highlight","formatHighlight"],_e=(0,c.forwardRef)(function(t,e){var a=t.className,r=t.style,i=t.value,l=i===void 0?"":i,u=t.onChange,s=t.highlight,n=t.formatHighlight,o=G()(t,be),d=(0,c.useRef)(null),m=(0,c.useRef)(null),f=(0,c.useRef)(null);(0,c.useImperativeHandle)(e,function(){return{textareaRef:d,textRef:f,containerRef:m}},[]);var h=de({value:l,onChange:u}),v=h.currentValue,_=h.handlerChange,R=pe({value:v,highlight:s,formatHighlight:n}),y=R.element,S=R.elementList,M=me({value:v,textareaRef:d,elementList:S}),p=M.handlerContainerClick,g=M.handlerBoxClick;return(0,x.jsx)("div",{className:(0,D.Z)("highlight-textarea-container",a),style:r,onClick:p,ref:m,children:(0,x.jsxs)("div",{className:"highlight-textarea",children:[(0,x.jsx)("textarea",A()(A()({},o),{},{className:"highlight-textarea-textarea",onChange:_,value:v,ref:d})),(0,x.jsx)("div",{className:"highlight-textarea-box",onClick:g,contentEditable:"plaintext-only",suppressContentEditableWarning:!0,ref:f,children:y})]})})}),Re=_e,ye=k(49057),Ce=[];function xe(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce,r=(0,c.useRef)({fn:t,timer:null}),i=r.current;(0,c.useEffect)(function(){i.fn=t},[t]);var l=(0,c.useCallback)(function(){for(var u=arguments.length,s=new Array(u),n=0;n<u;n++)s[n]=arguments[n];clearTimeout(i.timer),i.timer=setTimeout(function(){i.fn.apply(i,s)},e)},a);return l}var J=xe;function Ee(t){var e=t.currentItemMinWidth,a=t.gap,r=t.column,i=(0,c.useRef)(null),l=(0,c.useState)(1),u=L()(l,2),s=u[0],n=u[1],o=(0,c.useMemo)(function(){return r||s},[r,s]),d=J(function(h){n(h)},0,[]),m=(0,c.useCallback)(function(h){return d(Math.floor(h.contentRect.width/(e+a)))},[e,a,d]),f=Z(m,i);return(0,c.useEffect)(function(){return function(){return f()}},[]),{containerRef:i,col:o}}var Te=Ee,Se=function(e){var a=e.className,r=e.style,i=e.options,l=e.children,u=i!=null?i:{},s=u.gap,n=s===void 0?0:s,o=u.itemWidth,d=u.itemMinWidth,m=d===void 0?300:d,f=u.itemMaxWidth,h=f===void 0?400:f,v=u.column,_=(0,c.useMemo)(function(){return{currentItemMaxWidth:o!=null?o:h,currentItemMinWidth:o!=null?o:m}},[o,h,m]),R=_.currentItemMaxWidth,y=_.currentItemMinWidth,S=Te({currentItemMinWidth:y,gap:n,column:v}),M=S.containerRef,p=S.col,g=(0,ye.Z)({gap:n,currentItemMaxWidth:R,currentItemMinWidth:y,children:l,col:p});return(0,x.jsx)("div",{className:(0,D.Z)("masonry",a),style:r,ref:M,children:g})},ke=Se;function Me(t){var e=t.children,a=t.containerRef,r=(0,c.useState)({hasX:!1,hasY:!1}),i=L()(r,2),l=i[0],u=i[1],s=(0,c.useCallback)(function(){if(a.current){var n=a.current,o=n.scrollHeight,d=n.clientHeight,m=n.scrollWidth,f=n.clientWidth,h=m>f,v=o>d;u({hasX:h,hasY:v})}},[]);return(0,c.useEffect)(function(){if(a.current){s();var n=new ResizeObserver(function(o){return o.forEach(function(){return s()})});return n.observe(a.current),function(){return n.disconnect()}}},[e]),{hasScroll:l}}var we=Me;function Ae(t){var e=t.children,a=t.containerRef,r=t.scrollThumbYRef,i=t.scrollThumbXRef,l=t.gap,u=t.size,s=(0,c.useRef)(!1),n=(0,c.useRef)({X:0,Y:0}),o=(0,c.useRef)(0),d=(0,c.useRef)(0),m=(0,c.useRef)(null),f=(0,c.useMemo)(function(){return l+u},[l,u]),h=(0,c.useRef)(4),v=(0,c.useCallback)(function(){if(!(!a.current||!r.current||!i.current)){var p=a.current,g=p.scrollTop,b=p.scrollLeft,E=p.clientHeight,C=p.clientWidth,w=p.scrollHeight,I=p.scrollWidth,T=w-E,W=I-C,H=g/T*o.current,B=b/W*d.current;r.current.style.top="".concat(Math.min(Math.max(H,h.current),o.current),"px"),i.current.style.left="".concat(Math.min(Math.max(B,h.current),d.current),"px")}},[]);(0,c.useEffect)(function(){if(!(!a.current||!r.current||!i.current)){var p=a.current,g=p.offsetHeight,b=p.offsetWidth,E=p.scrollHeight,C=p.scrollWidth,w=g*(g/E),I=b*(b/C);o.current=g-w-f,d.current=b-I-f,i.current.style.width="".concat(I,"px"),r.current.style.height="".concat(w,"px"),v()}},[e,f]);var _=function(g){if(s.current&&a.current){var b=a.current,E=b.clientHeight,C=b.clientWidth,w=b.scrollHeight,I=b.scrollWidth,T=w-E,W=I-C;if(g.preventDefault(),m.current==="Y"){var H=g.pageY-n.current.Y,B=H/o.current*T;console.log(B),a.current.scrollTop=B}else if(m.current==="X"){var xr=g.pageX-n.current.X,Er=xr/d.current*W;a.current.scrollLeft=Er}}},R=function p(){var g,b;s.current=!1,m.current=null,(g=r.current)===null||g===void 0||g.classList.remove("active"),(b=i.current)===null||b===void 0||b.classList.remove("active"),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",p)},y=function(g){!r.current||!i.current||(g.preventDefault(),s.current=!0,n.current={X:g.pageX-i.current.offsetLeft,Y:g.pageY-r.current.offsetTop},document.addEventListener("mousemove",_),document.addEventListener("mouseup",R))},S=(0,c.useCallback)(function(p){var g;m.current="Y",(g=r.current)===null||g===void 0||g.classList.add("active"),y(p)},[y]),M=(0,c.useCallback)(function(p){var g;m.current="X",(g=i.current)===null||g===void 0||g.classList.add("active"),y(p)},[y]);return{scrollThumbX:i,scrollThumbY:r,onThumbX:M,onThumbY:S,handlerScroll:v}}var Ie=Ae,Q={gap:4,size:4,background:"#000",border:"none",radius:999,opacity:1},We=(0,c.forwardRef)(function(t,e){var a=t.className,r=t.style,i=t.containerStyle,l=t.containerClassName,u=t.thumbOptions,s=u===void 0?Q:u,n=t.hoverThumbOptions,o=t.children,d=A()(A()({},Q),s),m=(0,c.useMemo)(function(){var b=function(C){return typeof C=="number"?"".concat(C,"px"):C};return A()({"--scroll-thumb-gap":b(d.gap),"--scroll-thumb-size":b(d.size),"--scroll-thumb-border-radius":b(d.radius),"--scroll-thumb-background":d.background,"--scroll-thumb-border":d.border,"--scroll-thumb-opacity":d.opacity,"--scroll-thumb-hover-gap":b(n==null?void 0:n.gap),"--scroll-thumb-hover-size":b(n==null?void 0:n.size),"--scroll-thumb-hover-border-radius":b(n==null?void 0:n.radius),"--scroll-thumb-hover-background":n==null?void 0:n.background,"--scroll-thumb-hover-border":n==null?void 0:n.border,"--scroll-thumb-hover-opacity":n==null?void 0:n.opacity},r)},[s,r,n,d]),f=(0,c.useRef)(null),h=we({children:o,containerRef:f}),v=h.hasScroll,_=(0,c.useRef)(null),R=(0,c.useRef)(null),y=Ie({children:o,containerRef:f,scrollThumbXRef:_,scrollThumbYRef:R,gap:d.gap,size:d.size}),S=y.onThumbX,M=y.onThumbY,p=y.handlerScroll,g=(0,c.useRef)(null);return(0,c.useImperativeHandle)(e,function(){return{mainRef:g,containerRef:f,scrollThumbXRef:_,scrollThumbYRef:R}},[]),(0,x.jsxs)("div",{className:(0,D.Z)("scroll-container",a),style:m,ref:g,children:[(0,x.jsx)("div",{className:(0,D.Z)("scroll-container-content",l),style:i,onScroll:p,ref:f,children:o}),(0,x.jsx)("div",{className:(0,D.Z)("scroll-thumb scroll-thumb-y",{show:v.hasY}),onMouseDown:M,ref:R}),(0,x.jsx)("div",{className:(0,D.Z)("scroll-thumb scroll-thumb-x",{show:v.hasX}),onMouseDown:S,ref:_})]})}),De=We,X=k(63193),Le=k(71674),Ne=function(e){var a=e.className,r=a===void 0?"":a,i=e.style,l=e.target,u=e.direction,s=u===void 0?"vertical":u,n=e.itemOptions,o=e.placement,d=o===void 0?"right":o,m=e.alignment,f=m===void 0?"end":m,h=e.offset,v=e.zIndex,_=e.children,R=(0,c.useState)(document.body),y=L()(R,2),S=y[0],M=y[1];(0,c.useEffect)(function(){if(!(0,X.Z)(l)){if(l!=null&&l.current)return M(l==null?void 0:l.current);M(l)}},[l]);var p=(0,c.useMemo)(function(){return U()({},(0,X.Z)(v)?"":"--sidebar-zIndex",v)},[v]),g=(0,c.useMemo)(function(){var T={};switch(d){case"right":T.alignItems="end";case"left":{switch(T.height="100%",T.width="0px",T.flexDirection="column",f){case"start":T.justifyContent="start";break;case"center":T.justifyContent="center";break;case"end":T.justifyContent="end";break}break}case"bottom":T.alignItems="end";case"top":switch(T.width="100%",T.height="0px",f){case"start":T.justifyContent="start";break;case"center":T.justifyContent="center";break;case"end":T.justifyContent="end";break}}return T[d]=0,T},[d,f]),b=(0,c.useMemo)(function(){return A()(A()(A()({},p),g),i)},[p,g,i]),E=n!=null?n:{},C=E.gap,w=(0,c.useMemo)(function(){return U()({},(0,X.Z)(C)?"":"--sidebar-item-gap","".concat(C,"px"))},[C]),I=(0,c.useMemo)(function(){if(!h)return{};var T=h.top,W=h.left,H=h.bottom,B=h.right;return{transform:"translate(".concat(W!=null?W:B?-B:0,"px, ").concat(T!=null?T:H?-H:0,"px)")}},[h]);return(0,Le.createPortal)((0,x.jsx)("div",{className:(0,D.Z)("sidebar",r),style:b,children:(0,x.jsx)("div",{className:"sidebar-".concat(s),style:A()(A()({},w),I),children:_})}),S)},$e=Ne;function Be(t){for(var e=t.parentElement;e;){if(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)return e;e=e.parentElement}return document}function He(t){var e=t.imgRef,a=t.src;(0,c.useEffect)(function(){if(!(!e.current||a===void 0)){var r=function(s){s.forEach(function(n){if(n.isIntersecting){var o;(o=e.current)===null||o===void 0||o.setAttribute("src",a)}})},i=Be(e.current),l=new IntersectionObserver(r,{root:i,threshold:[0]});return l.observe(e.current),function(){return l.disconnect()}}},[a])}var Pe=He;function Oe(t){var e=t.imgRef,a=t.src,r=(0,c.useState)(!0),i=L()(r,2),l=i[0],u=i[1],s=function(){return u(!1)},n=function(){u(!1)};return(0,c.useEffect)(function(){if(e.current)return u(!0),e.current.getAttribute("src")&&e.current.complete&&u(!1),e.current.addEventListener("load",s),e.current.addEventListener("error",n),function(){var o,d;(o=e.current)===null||o===void 0||o.removeEventListener("load",s),(d=e.current)===null||d===void 0||d.removeEventListener("error",n)}},[a]),{loading:l}}var Fe=Oe,ze=["className","src","style","wrapClassName","wrapStyle","radius"],Ue=function(e){var a=e.className,r=e.src,i=e.style,l=e.wrapClassName,u=e.wrapStyle,s=e.radius,n=s===void 0?6:s,o=G()(e,ze),d=(0,c.useRef)(null);Pe({src:r,imgRef:d});var m=Fe({src:r,imgRef:d}),f=m.loading,h=(0,c.useMemo)(function(){return A()({objectFit:"cover",imageRendering:"pixelated",opacity:f?0:1,borderRadius:n},i)},[i,f,n]),v=(0,c.useMemo)(function(){return A()({pointerEvents:f?"none":void 0,userSelect:f?"none":void 0,backgroundColor:f?"rgba(0, 0, 0, 0.06)":"transparent",borderRadius:n},u)},[f,u,n]);return(0,x.jsx)("div",{className:(0,D.Z)("simple-img-wrap",l),style:v,children:(0,x.jsx)("img",A()({className:(0,D.Z)("simple-img",a),style:h,draggable:!1,loading:"lazy",ref:d},o))})},Xe=Ue,Ye=function(e){var a=e.className,r=e.style,i=e.radius,l=e.width,u=e.height,s=(0,c.useMemo)(function(){return A()(A()({},r),{},{width:l!=null?l:"var(--skeleton-width)",height:u!=null?u:"var(--skeleton-height)",borderRadius:i!=null?i:"var(--skeleton-radius)"})},[r,i,l,u]);return(0,x.jsx)("div",{className:(0,D.Z)("skeleton",a),style:s})},je=Ye,Ve=k(90228),N=k.n(Ve),Ze=k(87999),F=k.n(Ze),Y=k(95740);function Ge(t){var e=t.url,a=(0,c.useState)([]),r=L()(a,2),i=r[0],l=r[1],u=(0,c.useRef)([]),s=(0,c.useRef)(null),n=(0,c.useCallback)(function(f){u.current.push(f)},[]),o=function(h){var v,_,R=h.moov.traks[0].mdia.minf.stbl.stsd.entries[0],y=(v=(_=R.avcC)!==null&&_!==void 0?_:R.hvcC)!==null&&v!==void 0?v:R.vpcC;if(y){var S=new Y.hb(void 0,0,Y.IP.BIG_ENDIAN);return y.write(S),new Uint8Array(S.buffer.slice(8))}},d=(0,c.useCallback)(F()(N()().mark(function f(){var h,v,_,R,y,S;return N()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return h=(0,Y.cn)(),v=new VideoDecoder({output:n,error:function(b){return console.error("Decoder error:",b)}}),h.onReady=function(g){var b=g.tracks.find(function(E){return E.type==="video"});b&&(v.configure({codec:b.codec||"",description:o(h),hardwareAcceleration:"prefer-hardware"}),h.setExtractionOptions(b.id,null,{nbSamples:1}),h.start())},h.onSamples=function(g,b,E){E.forEach(function(C){var w,I=new EncodedVideoChunk({type:C.is_sync?"key":"delta",timestamp:C.cts,duration:C.duration,data:((w=C.data)===null||w===void 0?void 0:w.slice().buffer)||new Uint8Array});v.decode(I)})},p.next=6,fetch(e);case 6:_=p.sent,R=_.body.getReader(),s.current=R,y=0,S=function(){var g=F()(N()().mark(function b(){var E,C,w,I;return N()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,R.read();case 2:if(E=W.sent,C=E.done,w=E.value,!C){W.next=11;break}return h.flush(),W.next=9,v.flush();case 9:return l(u.current),W.abrupt("return");case 11:I=w.buffer,I.fileStart=y,y+=I.byteLength,h.appendBuffer(I),S();case 16:case"end":return W.stop()}},b)}));return function(){return g.apply(this,arguments)}}(),S();case 12:case"end":return p.stop()}},f)})),[n,e]),m=(0,c.useCallback)(function(){u.current.forEach(function(f){return f.close()}),u.current=[],s.current&&s.current.cancel().catch(function(){})},[]);return(0,c.useEffect)(function(){return d(),function(){return m()}},[d,m]),{frames:i}}var q=Ge;function Ke(t,e,a){return j.apply(this,arguments)}function j(){return j=F()(N()().mark(function t(e,a,r){var i,l,u,s,n,o,d,m,f,h,v;return N()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:i=a.getBoundingClientRect(),l=i.width,u=i.height,s=e.displayWidth||e.codedWidth,n=e.displayHeight||e.codedHeight,o=l/u,d=s/n,m=0,f=0,h=s,v=n,d>o?(h=n*o,m=(s-h)/2):(v=s/o,f=(n-v)/2),r.drawImage(e,m,f,h,v,0,0,l,u);case 8:case"end":return R.stop()}},t)})),j.apply(this,arguments)}function ee(t,e,a){var r=t.createShader(e);if(t.shaderSource(r,a),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw console.error("\u7740\u8272\u5668\u7F16\u8BD1\u9519\u8BEF:",t.getShaderInfoLog(r)),t.deleteShader(r),new Error("\u7740\u8272\u5668\u7F16\u8BD1\u5931\u8D25");return r}function Je(t){var e=`
        attribute vec2 a_position;
        attribute vec2 a_texCoord;
        varying vec2 v_texCoord;
        void main() {
            gl_Position = vec4(a_position, 0, 1);
            v_texCoord = a_texCoord;
        }
    `,a=`
        precision mediump float;
        varying vec2 v_texCoord;
        uniform sampler2D u_image;
        void main() {
            gl_FragColor = texture2D(u_image, v_texCoord);
        }
    `,r=ee(t,t.VERTEX_SHADER,e),i=ee(t,t.FRAGMENT_SHADER,a),l=t.createProgram();return t.attachShader(l,r),t.attachShader(l,i),t.linkProgram(l),l}function Qe(t,e,a){return V.apply(this,arguments)}function V(){return V=F()(N()().mark(function t(e,a,r){var i,l,u,s,n,o,d,m,f,h;return N()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:i=e.displayWidth/e.displayHeight,l=a.width/a.height,u=1,s=1,i>l?u=i/l:s=l/i,n=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),o=Je(r),r.useProgram(o),d=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-u,-s,u,-s,-u,s,u,s]),r.STATIC_DRAW),m=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,m),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),r.STATIC_DRAW),f=r.getAttribLocation(o,"a_position"),r.enableVertexAttribArray(f),r.bindBuffer(r.ARRAY_BUFFER,d),r.vertexAttribPointer(f,2,r.FLOAT,!1,0,0),h=r.getAttribLocation(o,"a_texCoord"),r.enableVertexAttribArray(h),r.bindBuffer(r.ARRAY_BUFFER,m),r.vertexAttribPointer(h,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,4),r.deleteTexture(n),r.deleteBuffer(d),r.deleteBuffer(m);case 31:case"end":return _.stop()}},t)})),V.apply(this,arguments)}function qe(t){var e=t.frames,a=t.canvasRef,r=t.currentFrame,i=(0,c.useRef)(null),l=(0,c.useCallback)(function(s){var n=a.current,o=i.current,d=e[s];n&&o&&d&&(o instanceof CanvasRenderingContext2D?Ke(d,n,o):Qe(d,n,o))},[a,e]),u=(0,c.useCallback)(function(){var s=a.current;if(s){i.current||(i.current=s.getContext("webgl")||s.getContext("2d"));var n=s.getBoundingClientRect(),o=n.width,d=n.height,m=window.devicePixelRatio||1;if(s.width=o*m,s.height=d*m,i.current&&i.current instanceof CanvasRenderingContext2D)i.current.scale(m,m);else{var f;(f=i.current)===null||f===void 0||f.viewport(0,0,s.width,s.height)}l(r)}},[a,r,l]);(0,c.useEffect)(function(){if(typeof window!="undefined")return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}},[u])}var er=function(e){var a=e.className,r=e.url,i=e.currentFrame,l=e.onTotalFrames,u=(0,c.useRef)(null),s=q({url:r}),n=s.frames;return(0,c.useEffect)(function(){return l==null?void 0:l(n)},[n]),qe({canvasRef:u,frames:n,currentFrame:i}),(0,x.jsx)("canvas",{className:a,ref:u})},rr=er;function tr(t,e){var a=(0,c.useRef)(),r=(0,c.useState)(t),i=L()(r,2),l=i[0],u=i[1],s=(0,c.useCallback)(function(o){clearTimeout(a.current),a.current=setTimeout(function(){return u(function(d){return typeof o=="function"?o(d):t})},e)},[e,t]),n=(0,c.useCallback)(function(o){a.current&&clearTimeout(a.current),u(function(d){return typeof o=="function"?o(d):t})},[t]);return[l,s,n]}var nr=tr;function ar(t,e,a){var r,i=(0,c.useRef)();return(0,c.useEffect)(function(){if(e.current)r=e.current;else if(e instanceof Element)r=e;else return;return i.current=new MutationObserver(function(l){l.forEach(function(u){t(u,i.current)})}),i.current.observe(r,a),function(){var l;r&&((l=i.current)===null||l===void 0||l.disconnect())}},[t,a,e]),function(){var l;!r||!i||(l=i.current)===null||l===void 0||l.disconnect()}}var ir=ar,O=new WeakMap,$;function or(t,e,a){var r=a!=null?a:{},i=r.needRequestAnimationFrame,l=i===void 0?!0:i,u;return(0,c.useEffect)(function(){if(u=e.current?e.current:e,!!u)return $||($=new ResizeObserver(function(s){s.forEach(function(n){var o=!!(l&&requestAnimationFrame);o?requestAnimationFrame(function(){return O.get(n.target)(n,$)}):O.get(n.target)(n,$)})})),O.set(u,t),$.observe(u),function(){u&&(O.delete(u),$.unobserve(u))}},[t,a]),function(){u&&(O.delete(u),$.unobserve(u))}}var Z=or;function ur(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"both",a=t.parentElement;a;){if(e==="vertical"&&a.scrollHeight>a.clientHeight||e==="horizontal"&&a.scrollWidth>a.clientWidth||e==="both"&&(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth))return a;a=a.parentElement}return document.body}function cr(t){var e=t.top,a=e===void 0?0:e,r=t.left,i=r===void 0?0:r,l=t.direction,u=l===void 0?"vertical":l,s=(0,c.useRef)(null),n=(0,c.useRef)(null),o=(0,c.useRef)("0"),d=(0,c.useRef)("0");return(0,c.useLayoutEffect)(function(){var m;if(s.current){var f=(m=n.current)!==null&&m!==void 0?m:ur(s.current,u),h=f.getBoundingClientRect(),v=h.top,_=h.left,R=s.current.getBoundingClientRect(),y=R.top,S=R.left,M=function(){if(s.current){var b=f.scrollTop,E=f.scrollLeft,C=function(){return o.current=y-v-b<=a?"".concat(-y+v+b+a,"px"):"0px"},w=function(){return d.current=S-_-E<=i?"".concat(-S+_+E+i,"px"):"0px"};switch(u){case"vertical":C();break;case"horizontal":w();break;case"both":C(),w()}s.current.style.transform="translate(".concat(d.current,", ").concat(o.current,")")}},p=requestAnimationFrame?function(){return requestAnimationFrame(M)}:M;return f.addEventListener("scroll",p),function(){return f.removeEventListener("scroll",p)}}},[a]),{stickyElement:s,scrollElement:n}}var sr=cr,lr=[];function dr(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lr,r=(0,c.useRef)({fn:t,timer:null}),i=r.current;(0,c.useEffect)(function(){i.fn=t},[t]);var l=(0,c.useCallback)(function(){for(var u=arguments.length,s=new Array(u),n=0;n<u;n++)s[n]=arguments[n];i.timer||(i.timer=setTimeout(function(){clearTimeout(i.timer),i.timer=null,i.fn.apply(i,s)},e))},a);return l}var fr=dr;function hr(t,e){var a=(0,c.useRef)(),r=(0,c.useState)(t),i=L()(r,2),l=i[0],u=i[1],s=(0,c.useCallback)(function(o){a.current||(a.current=setTimeout(function(){clearTimeout(a.current),a.current=void 0,u(function(d){return typeof o=="function"?o(d):o})},e))},[e,t]),n=(0,c.useCallback)(function(o){a.current&&(clearTimeout(a.current),a.current=void 0),u(function(d){return typeof o=="function"?o(d):o})},[t]);return[l,s,n]}var mr=hr,vr=k(61442);function gr(t){if(!t.startsWith("data:image/"))return"Invalid base64 string";var e=t.substring(t.indexOf("image/")+6,t.indexOf(";"));switch(e){case"svg+xml":return"svg";case"x-icon":return"ico";case"vnd.microsoft.icon":return"ico";default:return e}}var re=gr;function pr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.name,r=a===void 0?"image_":a,i=e.mimeType,l=e.chunkSize,u=l===void 0?5:l,s=1,n=0,o=function(h){var v=document.createElement("a");v.href=h,v.download="".concat(r).concat(s,".").concat(i!=null?i:re(h)),document.body.appendChild(v),v.click(),document.body.removeChild(v),s++},d=(0,vr.Z)(t,u),m=setInterval(function(){d[n].forEach(o),n+=1,n>d.length-1&&clearInterval(m)},1e3)}var br=pr;function _r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"hex",e=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:255;return Math.floor(Math.random()*l)},a=function(){return e(360)},r=function(){return"".concat(e(100),"%")};switch(t){case"hex":return"#".concat(Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"));case"rgb":return"rgb(".concat(e(),",").concat(e(),", ").concat(e(),")");case"hsl":return"hsl(".concat(a(),",").concat(r(),"%, ").concat(r(),"%)");case"hsv":return"hsv(".concat(a(),",").concat(r(),"%, ").concat(r(),"%)");default:return"#000000"}}var Rr=_r;function yr(t){if(typeof t!="string"||t.trim().length===0)return!1;var e=/^data:image\/(png|jpeg|gif|bmp|svg\+xml|jpg|webp);base64,(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;return e.test(t)}var Cr=yr}}]);
