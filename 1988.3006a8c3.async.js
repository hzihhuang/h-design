"use strict";(self.webpackChunkHDesign=self.webpackChunkHDesign||[]).push([[1988],{99690:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _workspaces_h_design_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(861),_workspaces_h_design_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_workspaces_h_design_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(85893);function useMasonryCards(_ref){var gap=_ref.gap,col=_ref.col,currentItemMinWidth=_ref.currentItemMinWidth,currentItemMaxWidth=_ref.currentItemMaxWidth,children=_ref.children,child=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function(){return children instanceof Array?children:[children]},[children]),colChilds=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function(){var colHeightArray=Array.from({length:col}).map(function(){return 0}),colArray=Array.from({length:col}).map(function(){return[]});return child.forEach(function(item){var _item$props,_ratio,_colArray$currentMinI,_colArray$currentMinI2,ratio=item==null||(_item$props=item.props)===null||_item$props===void 0?void 0:_item$props.ratio;typeof ratio=="string"&&(ratio=eval(ratio));var minHeight=Math.min.apply(Math,_workspaces_h_design_node_modules_babel_runtime_helpers_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0___default()(colHeightArray)),currentMinIdx=colHeightArray.findIndex(function(U){return U===minHeight});colHeightArray[currentMinIdx]=colHeightArray[currentMinIdx]+1/((_ratio=ratio)!==null&&_ratio!==void 0?_ratio:1),(_colArray$currentMinI=colArray[currentMinIdx])===null||_colArray$currentMinI===void 0||(_colArray$currentMinI2=_colArray$currentMinI.push)===null||_colArray$currentMinI2===void 0||_colArray$currentMinI2.call(_colArray$currentMinI,item)}),colArray},[child,col]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"flex",style:{gap},children:Array.from({length:col}).map(function(U,O){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"flex",style:{gap,flexWrap:"nowrap",flexShrink:0,flexDirection:"column",width:"calc(".concat(100/col,"% - ").concat((col-1)*gap/col,"px)"),minWidth:currentItemMinWidth,maxWidth:currentItemMaxWidth},key:O,children:colChilds[O]})})})}__webpack_exports__.Z=useMasonryCards},71988:function(U,O,k){k.r(O),k.d(O,{AutoRatioContainer:function(){return oe},CheckContainer:function(){return ce},HighlightTextarea:function(){return _e},Masonry:function(){return Te},ScrollContainer:function(){return We},Sidebar:function(){return $e},SimpleImg:function(){return Xe},Skeleton:function(){return Ye},VideoFrameViewer:function(){return rr},downloadBase64Imgs:function(){return Cr},getBase64Type:function(){return re},getRandomColor:function(){return Sr},isBase64Image:function(){return wr},useDebounce:function(){return J},useDebounceState:function(){return nr},useLocalStorageState:function(){return ir},useMutation:function(){return ur},useResize:function(){return Z},useSticky:function(){return dr},useThrottle:function(){return vr},useThrottleState:function(){return gr},useVideoFrames:function(){return q},useVideoHotkeys:function(){return br}});var te=k(38416),B=k.n(te),ne=k(42122),S=k.n(ne),ae=k(27424),D=k.n(ae),W=k(90512),c=k(67294),x=k(85893),ie=(0,c.forwardRef)(function(e,r){var a=e.ratio,t=a===void 0?1:a,o=e.children,l=e.className,u=l===void 0?"":l,s=e.boxStyle,n=e.boxClassName,i=n===void 0?"":n,f=e.style,h=(0,c.useRef)(null),d=(0,c.useRef)(null),v=(0,c.useState)("width"),m=D()(v,2),y=m[0],_=m[1],R=(0,c.useCallback)(function(M){var p,g,b=M.contentRect,E=b.width,C=b.height,A=(p=(g=M.target.firstChild).getBoundingClientRect)===null||p===void 0?void 0:p.call(g),I=A.width,w=A.height;_(function(){return t===1?E>C?"height":"width":C<=0?"height":E<=0?"width":E/C>I/w?"height":"width"})},[t]),T=Z(R,h,{needRequestAnimationFrame:!1});return(0,c.useEffect)(function(){return function(){return T()}},[]),(0,c.useImperativeHandle)(r,function(){return{containerRef:h,boxRef:d}},[]),(0,x.jsx)("div",{className:(0,W.Z)("auto-ratio-container",u),style:f,ref:h,children:(0,x.jsx)("div",{className:(0,W.Z)("auto-ratio-box",i),style:S()(S()({},s!=null?s:{}),{},B()({aspectRatio:"".concat(t)},y,"100%")),children:o})})}),oe=ie,ue=(0,c.forwardRef)(function(e,r){var a=e.className,t=a===void 0?"":a,o=e.style,l=e.children,u=e.checked,s=u===void 0?!1:u,n=e.onClick,i=e.radius,f=i===void 0?8:i,h=e.strokeWidth,d=h===void 0?2:h,v=e.gap,m=v===void 0?2:v,y=e.size,_=y===void 0?16:y,R=e.type,T=R===void 0?"radio":R,M=e.mode,p=M===void 0?"checked":M,g=(0,c.useMemo)(function(){switch(T){case"radio":return(0,x.jsx)("div",{className:(0,W.Z)("radio-check",{checked:s})});case"checkbox":return(0,x.jsx)("div",{className:(0,W.Z)("checkbox-check",{checked:s})});default:return null}},[T,s]),b=(0,c.useMemo)(function(){if(!g)return null;switch(p){case"hover":return(0,x.jsx)("div",{className:"hover-element",children:g});case"checked":return(0,x.jsx)("div",{className:"check-element",style:{opacity:s?1:void 0},children:g});case"always":return(0,x.jsx)("div",{className:"always-element",children:g})}},[p,g]),E=(0,c.useRef)(null);return(0,c.useImperativeHandle)(r,function(){return{containerRef:E}},[]),(0,x.jsxs)("div",{className:(0,W.Z)("check-container",t,{checked:s}),onClick:function(){return n==null?void 0:n(!s)},style:S()(S()({},o),{},{"--check-container-radius":"".concat(f,"px"),"--check-container-stoke":"".concat(d,"px"),"--check-container-gap":"".concat(m,"px"),"--check-container-size":"".concat(_,"px")}),ref:E,children:[l,b]})}),ce=ue,se=k(70215),K=k.n(se);function le(e){var r=e.value,a=e.onChange,t=(0,c.useState)(r!=null?r:""),o=D()(t,2),l=o[0],u=o[1],s=(0,c.useCallback)(function(n){if(a)return a(n);u(n.target.value)},[a]);return(0,c.useEffect)(function(){return u(r)},[r]),{currentValue:l,handlerChange:s}}var de=le,fe=k(861),G=k.n(fe);function he(e){var r=e.value,a=e.textareaRef,t=e.elementList,o=(0,c.useCallback)(function(u){u.target===u.currentTarget&&a.current&&(a.current.focus(),a.current.setSelectionRange(r.length,r.length))},[r]),l=(0,c.useCallback)(function(u){var s=window.getSelection(),n=G()(u.currentTarget.children),i=n.findIndex(function(m){return m===u.target}),f=t.filter(function(m,y){return y<(i>-1?i:t.length-1)}).reduce(function(m,y){return m+y.msg.length},0);if(s&&s.rangeCount>0&&a.current){var h=s.getRangeAt(0),d=h.startOffset+f,v=h.endOffset+f;a.current.focus(),a.current.setSelectionRange(d,v)}},[t]);return{handlerContainerClick:o,handlerBoxClick:l}}var ve=he,me=[];function ge(e){var r=e.value,a=r===void 0?"":r,t=e.highlight,o=t===void 0?me:t,l=e.formatHighlight,u=(0,c.useMemo)(function(){var n=[];return G()(a).reduce(function(i,f){i.str=i.str+f,n[i.idx]={type:i.type,msg:i.str};var h=o.some(function(d){return i.str.includes(d)?(i.type=d,!0):!1});return h&&(n[i.idx].msg=i.str.split(i.type)[0],n.push({type:i.type,msg:i.type}),i.idx=i.idx+2,i.str="",i.type="default"),i},{str:"",idx:0,type:"default"}),n},[a,o]),s=u.map(function(n,i){var f=null;switch(!0){case(u.length-1===i&&n.msg.includes(`
`)):{f=(0,x.jsxs)("span",{children:[n.msg,(0,x.jsx)("br",{})]});break}case n.type==="default":{f=(0,x.jsx)("span",{children:n.msg});break}case!!l:{f=l(n.msg);break}default:f=(0,x.jsx)("span",{style:{color:"blue"},children:n.msg})}return(0,x.jsx)(c.Fragment,{children:f},n.msg+i)});return{element:s,elementList:u}}var pe=ge,be=["className","style","value","onChange","highlight","formatHighlight"],ye=(0,c.forwardRef)(function(e,r){var a=e.className,t=e.style,o=e.value,l=o===void 0?"":o,u=e.onChange,s=e.highlight,n=e.formatHighlight,i=K()(e,be),f=(0,c.useRef)(null),h=(0,c.useRef)(null),d=(0,c.useRef)(null);(0,c.useImperativeHandle)(r,function(){return{textareaRef:f,textRef:d,containerRef:h}},[]);var v=de({value:l,onChange:u}),m=v.currentValue,y=v.handlerChange,_=pe({value:m,highlight:s,formatHighlight:n}),R=_.element,T=_.elementList,M=ve({value:m,textareaRef:f,elementList:T}),p=M.handlerContainerClick,g=M.handlerBoxClick;return(0,x.jsx)("div",{className:(0,W.Z)("highlight-textarea-container",a),style:t,onClick:p,ref:h,children:(0,x.jsxs)("div",{className:"highlight-textarea",children:[(0,x.jsx)("textarea",S()(S()({},i),{},{className:"highlight-textarea-textarea",onChange:y,value:m,ref:f})),(0,x.jsx)("div",{className:"highlight-textarea-box",onClick:g,contentEditable:"plaintext-only",suppressContentEditableWarning:!0,ref:d,children:R})]})})}),_e=ye,Re=k(99690),Ce=[];function xe(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce,t=(0,c.useRef)({fn:e,timer:null}),o=t.current;(0,c.useEffect)(function(){o.fn=e},[e]);var l=(0,c.useCallback)(function(){for(var u=arguments.length,s=new Array(u),n=0;n<u;n++)s[n]=arguments[n];clearTimeout(o.timer),o.timer=setTimeout(function(){o.fn.apply(o,s)},r)},a);return l}var J=xe;function Se(e){var r=e.currentItemMinWidth,a=e.gap,t=e.column,o=(0,c.useRef)(null),l=(0,c.useState)(1),u=D()(l,2),s=u[0],n=u[1],i=(0,c.useMemo)(function(){return t||s},[t,s]),f=J(function(v){n(v)},0,[]),h=(0,c.useCallback)(function(v){return f(Math.floor(v.contentRect.width/(r+a)))},[r,a,f]),d=Z(h,o);return(0,c.useEffect)(function(){return function(){return d()}},[]),{containerRef:o,col:i}}var Ee=Se,we=function(r){var a=r.className,t=r.style,o=r.options,l=r.children,u=o!=null?o:{},s=u.gap,n=s===void 0?0:s,i=u.itemWidth,f=u.itemMinWidth,h=f===void 0?300:f,d=u.itemMaxWidth,v=d===void 0?400:d,m=u.column,y=(0,c.useMemo)(function(){return{currentItemMaxWidth:i!=null?i:v,currentItemMinWidth:i!=null?i:h}},[i,v,h]),_=y.currentItemMaxWidth,R=y.currentItemMinWidth,T=Ee({currentItemMinWidth:R,gap:n,column:m}),M=T.containerRef,p=T.col,g=(0,Re.Z)({gap:n,currentItemMaxWidth:_,currentItemMinWidth:R,children:l,col:p});return(0,x.jsx)("div",{className:(0,W.Z)("masonry",a),style:t,ref:M,children:g})},Te=we;function ke(e){var r=e.children,a=e.containerRef,t=(0,c.useState)({hasX:!1,hasY:!1}),o=D()(t,2),l=o[0],u=o[1],s=(0,c.useCallback)(function(){if(a.current){var n=a.current,i=n.scrollHeight,f=n.clientHeight,h=n.scrollWidth,d=n.clientWidth,v=h>d,m=i>f;u({hasX:v,hasY:m})}},[]);return(0,c.useEffect)(function(){if(a.current){s();var n=new ResizeObserver(function(i){return i.forEach(function(){return s()})});return n.observe(a.current),function(){return n.disconnect()}}},[r]),{hasScroll:l}}var Me=ke;function Ae(e){var r=e.children,a=e.containerRef,t=e.scrollThumbYRef,o=e.scrollThumbXRef,l=e.gap,u=e.size,s=(0,c.useRef)(!1),n=(0,c.useRef)({X:0,Y:0}),i=(0,c.useRef)(0),f=(0,c.useRef)(0),h=(0,c.useRef)(null),d=(0,c.useMemo)(function(){return l+u},[l,u]),v=(0,c.useRef)(4),m=(0,c.useCallback)(function(){if(!(!a.current||!t.current||!o.current)){var p=a.current,g=p.scrollTop,b=p.scrollLeft,E=p.clientHeight,C=p.clientWidth,A=p.scrollHeight,I=p.scrollWidth,w=A-E,L=I-C,P=g/w*i.current,H=b/L*f.current;t.current.style.top="".concat(Math.min(Math.max(P,v.current),i.current),"px"),o.current.style.left="".concat(Math.min(Math.max(H,v.current),f.current),"px")}},[]);(0,c.useEffect)(function(){if(!(!a.current||!t.current||!o.current)){var p=a.current,g=p.offsetHeight,b=p.offsetWidth,E=p.scrollHeight,C=p.scrollWidth,A=g*(g/E),I=b*(b/C);i.current=g-A-d,f.current=b-I-d,o.current.style.width="".concat(I,"px"),t.current.style.height="".concat(A,"px"),m()}},[r,d]);var y=function(g){if(s.current&&a.current){var b=a.current,E=b.clientHeight,C=b.clientWidth,A=b.scrollHeight,I=b.scrollWidth,w=A-E,L=I-C;if(g.preventDefault(),h.current==="Y"){var P=g.pageY-n.current.Y,H=P/i.current*w;console.log(H),a.current.scrollTop=H}else if(h.current==="X"){var Tr=g.pageX-n.current.X,kr=Tr/f.current*L;a.current.scrollLeft=kr}}},_=function p(){var g,b;s.current=!1,h.current=null,(g=t.current)===null||g===void 0||g.classList.remove("active"),(b=o.current)===null||b===void 0||b.classList.remove("active"),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",p)},R=function(g){!t.current||!o.current||(g.preventDefault(),s.current=!0,n.current={X:g.pageX-o.current.offsetLeft,Y:g.pageY-t.current.offsetTop},document.addEventListener("mousemove",y),document.addEventListener("mouseup",_))},T=(0,c.useCallback)(function(p){var g;h.current="Y",(g=t.current)===null||g===void 0||g.classList.add("active"),R(p)},[R]),M=(0,c.useCallback)(function(p){var g;h.current="X",(g=o.current)===null||g===void 0||g.classList.add("active"),R(p)},[R]);return{scrollThumbX:o,scrollThumbY:t,onThumbX:M,onThumbY:T,handlerScroll:m}}var Ie=Ae,Q={gap:4,size:4,background:"#000",border:"none",radius:999,opacity:1},Le=(0,c.forwardRef)(function(e,r){var a=e.className,t=e.style,o=e.containerStyle,l=e.containerClassName,u=e.thumbOptions,s=u===void 0?Q:u,n=e.hoverThumbOptions,i=e.children,f=S()(S()({},Q),s),h=(0,c.useMemo)(function(){var b=function(C){return typeof C=="number"?"".concat(C,"px"):C};return S()({"--scroll-thumb-gap":b(f.gap),"--scroll-thumb-size":b(f.size),"--scroll-thumb-border-radius":b(f.radius),"--scroll-thumb-background":f.background,"--scroll-thumb-border":f.border,"--scroll-thumb-opacity":f.opacity,"--scroll-thumb-hover-gap":b(n==null?void 0:n.gap),"--scroll-thumb-hover-size":b(n==null?void 0:n.size),"--scroll-thumb-hover-border-radius":b(n==null?void 0:n.radius),"--scroll-thumb-hover-background":n==null?void 0:n.background,"--scroll-thumb-hover-border":n==null?void 0:n.border,"--scroll-thumb-hover-opacity":n==null?void 0:n.opacity},t)},[s,t,n,f]),d=(0,c.useRef)(null),v=Me({children:i,containerRef:d}),m=v.hasScroll,y=(0,c.useRef)(null),_=(0,c.useRef)(null),R=Ie({children:i,containerRef:d,scrollThumbXRef:y,scrollThumbYRef:_,gap:f.gap,size:f.size}),T=R.onThumbX,M=R.onThumbY,p=R.handlerScroll,g=(0,c.useRef)(null);return(0,c.useImperativeHandle)(r,function(){return{mainRef:g,containerRef:d,scrollThumbXRef:y,scrollThumbYRef:_}},[]),(0,x.jsxs)("div",{className:(0,W.Z)("scroll-container",a),style:h,ref:g,children:[(0,x.jsx)("div",{className:(0,W.Z)("scroll-container-content",l),style:o,onScroll:p,ref:d,children:i}),(0,x.jsx)("div",{className:(0,W.Z)("scroll-thumb scroll-thumb-y",{show:m.hasY}),onMouseDown:M,ref:_}),(0,x.jsx)("div",{className:(0,W.Z)("scroll-thumb scroll-thumb-x",{show:m.hasX}),onMouseDown:T,ref:y})]})}),We=Le,X=k(27601),De=k(73935),Ne=function(r){var a=r.className,t=a===void 0?"":a,o=r.style,l=r.target,u=r.direction,s=u===void 0?"vertical":u,n=r.itemOptions,i=r.placement,f=i===void 0?"right":i,h=r.alignment,d=h===void 0?"end":h,v=r.offset,m=r.zIndex,y=r.children,_=(0,c.useState)(document.body),R=D()(_,2),T=R[0],M=R[1];(0,c.useEffect)(function(){if(!(0,X.Z)(l)){if(l!=null&&l.current)return M(l==null?void 0:l.current);M(l)}},[l]);var p=(0,c.useMemo)(function(){return B()({},(0,X.Z)(m)?"":"--sidebar-zIndex",m)},[m]),g=(0,c.useMemo)(function(){var w={};switch(f){case"right":w.alignItems="end";case"left":{switch(w.height="100%",w.width="0px",w.flexDirection="column",d){case"start":w.justifyContent="start";break;case"center":w.justifyContent="center";break;case"end":w.justifyContent="end";break}break}case"bottom":w.alignItems="end";case"top":switch(w.width="100%",w.height="0px",d){case"start":w.justifyContent="start";break;case"center":w.justifyContent="center";break;case"end":w.justifyContent="end";break}}return w[f]=0,w},[f,d]),b=(0,c.useMemo)(function(){return S()(S()(S()({},p),g),o)},[p,g,o]),E=n!=null?n:{},C=E.gap,A=(0,c.useMemo)(function(){return B()({},(0,X.Z)(C)?"":"--sidebar-item-gap","".concat(C,"px"))},[C]),I=(0,c.useMemo)(function(){if(!v)return{};var w=v.top,L=v.left,P=v.bottom,H=v.right;return{transform:"translate(".concat(L!=null?L:H?-H:0,"px, ").concat(w!=null?w:P?-P:0,"px)")}},[v]);return(0,De.createPortal)((0,x.jsx)("div",{className:(0,W.Z)("sidebar",t),style:b,children:(0,x.jsx)("div",{className:"sidebar-".concat(s),style:S()(S()({},A),I),children:y})}),T)},$e=Ne;function He(e){for(var r=e.parentElement;r;){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.parentElement}return document}function Be(e){var r=e.imgRef,a=e.src;(0,c.useEffect)(function(){if(!(!r.current||a===void 0)){var t=function(s){s.forEach(function(n){if(n.isIntersecting){var i;(i=r.current)===null||i===void 0||i.setAttribute("src",a)}})},o=He(r.current),l=new IntersectionObserver(t,{root:o,threshold:[0]});return l.observe(r.current),function(){return l.disconnect()}}},[a])}var Pe=Be;function Oe(e){var r=e.imgRef,a=e.src,t=(0,c.useState)(!0),o=D()(t,2),l=o[0],u=o[1],s=function(){return u(!1)},n=function(){u(!1)};return(0,c.useEffect)(function(){if(r.current)return u(!0),r.current.getAttribute("src")&&r.current.complete&&u(!1),r.current.addEventListener("load",s),r.current.addEventListener("error",n),function(){var i,f;(i=r.current)===null||i===void 0||i.removeEventListener("load",s),(f=r.current)===null||f===void 0||f.removeEventListener("error",n)}},[a]),{loading:l}}var Fe=Oe,ze=["className","src","style","wrapClassName","wrapStyle","radius"],Ue=function(r){var a=r.className,t=r.src,o=r.style,l=r.wrapClassName,u=r.wrapStyle,s=r.radius,n=s===void 0?6:s,i=K()(r,ze),f=(0,c.useRef)(null);Pe({src:t,imgRef:f});var h=Fe({src:t,imgRef:f}),d=h.loading,v=(0,c.useMemo)(function(){return S()({objectFit:"cover",imageRendering:"pixelated",opacity:d?0:1,borderRadius:n},o)},[o,d,n]),m=(0,c.useMemo)(function(){return S()({pointerEvents:d?"none":void 0,userSelect:d?"none":void 0,backgroundColor:d?"rgba(0, 0, 0, 0.06)":"transparent",borderRadius:n},u)},[d,u,n]);return(0,x.jsx)("div",{className:(0,W.Z)("simple-img-wrap",l),style:m,children:(0,x.jsx)("img",S()({className:(0,W.Z)("simple-img",a),style:v,draggable:!1,loading:"lazy",ref:f},i))})},Xe=Ue,Ve=function(r){var a=r.className,t=r.style,o=r.radius,l=r.width,u=r.height,s=(0,c.useMemo)(function(){return S()(S()({},t),{},{width:l!=null?l:"var(--skeleton-width)",height:u!=null?u:"var(--skeleton-height)",borderRadius:o!=null?o:"var(--skeleton-radius)"})},[t,o,l,u]);return(0,x.jsx)("div",{className:(0,W.Z)("skeleton",a),style:s})},Ye=Ve,je=k(17061),N=k.n(je),Ze=k(17156),z=k.n(Ze),V=k(1451);function Ke(e){var r=e.url,a=(0,c.useState)([]),t=D()(a,2),o=t[0],l=t[1],u=(0,c.useRef)([]),s=(0,c.useRef)(null),n=(0,c.useCallback)(function(d){u.current.push(d)},[]),i=function(v){var m,y,_=v.moov.traks[0].mdia.minf.stbl.stsd.entries[0],R=(m=(y=_.avcC)!==null&&y!==void 0?y:_.hvcC)!==null&&m!==void 0?m:_.vpcC;if(R){var T=new V.hb(void 0,0,V.IP.BIG_ENDIAN);return R.write(T),new Uint8Array(T.buffer.slice(8))}},f=(0,c.useCallback)(z()(N()().mark(function d(){var v,m,y,_,R,T;return N()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v=(0,V.cn)(),m=new VideoDecoder({output:n,error:function(b){return console.error("Decoder error:",b)}}),v.onReady=function(g){var b=g.tracks.find(function(E){return E.type==="video"});b&&(m.configure({codec:b.codec||"",description:i(v),hardwareAcceleration:"prefer-hardware"}),v.setExtractionOptions(b.id,null,{nbSamples:1}),v.start())},v.onSamples=function(g,b,E){E.forEach(function(C){var A,I=new EncodedVideoChunk({type:C.is_sync?"key":"delta",timestamp:C.cts,duration:C.duration,data:((A=C.data)===null||A===void 0?void 0:A.slice().buffer)||new Uint8Array});m.decode(I)})},p.next=6,fetch(r);case 6:y=p.sent,_=y.body.getReader(),s.current=_,R=0,T=function(){var g=z()(N()().mark(function b(){var E,C,A,I;return N()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,_.read();case 2:if(E=L.sent,C=E.done,A=E.value,!C){L.next=11;break}return v.flush(),L.next=9,m.flush();case 9:return l(u.current),L.abrupt("return");case 11:I=A.buffer,I.fileStart=R,R+=I.byteLength,v.appendBuffer(I),T();case 16:case"end":return L.stop()}},b)}));return function(){return g.apply(this,arguments)}}(),T();case 12:case"end":return p.stop()}},d)})),[n,r]),h=(0,c.useCallback)(function(){u.current.forEach(function(d){return d.close()}),u.current=[],s.current&&s.current.cancel().catch(function(){})},[]);return(0,c.useEffect)(function(){return f(),function(){return h()}},[f,h]),{frames:o}}var q=Ke;function Ge(e,r,a){return Y.apply(this,arguments)}function Y(){return Y=z()(N()().mark(function e(r,a,t){var o,l,u,s,n,i,f,h,d,v,m;return N()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:o=a.getBoundingClientRect(),l=o.width,u=o.height,s=r.displayWidth||r.codedWidth,n=r.displayHeight||r.codedHeight,i=l/u,f=s/n,h=0,d=0,v=s,m=n,f>i?(v=n*i,h=(s-v)/2):(m=s/i,d=(n-m)/2),t.drawImage(r,h,d,v,m,0,0,l,u);case 8:case"end":return _.stop()}},e)})),Y.apply(this,arguments)}function ee(e,r,a){var t=e.createShader(r);if(e.shaderSource(t,a),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw console.error("\u7740\u8272\u5668\u7F16\u8BD1\u9519\u8BEF:",e.getShaderInfoLog(t)),e.deleteShader(t),new Error("\u7740\u8272\u5668\u7F16\u8BD1\u5931\u8D25");return t}function Je(e){var r=`
        attribute vec2 a_position;
        attribute vec2 a_texCoord;
        varying vec2 v_texCoord;
        void main() {
            gl_Position = vec4(a_position, 0, 1);
            v_texCoord = a_texCoord;
        }
    `,a=`
        precision mediump float;
        varying vec2 v_texCoord;
        uniform sampler2D u_image;
        void main() {
            gl_FragColor = texture2D(u_image, v_texCoord);
        }
    `,t=ee(e,e.VERTEX_SHADER,r),o=ee(e,e.FRAGMENT_SHADER,a),l=e.createProgram();return e.attachShader(l,t),e.attachShader(l,o),e.linkProgram(l),l}function Qe(e,r,a){return j.apply(this,arguments)}function j(){return j=z()(N()().mark(function e(r,a,t){var o,l,u,s,n,i,f,h,d,v;return N()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:o=r.displayWidth/r.displayHeight,l=a.width/a.height,u=1,s=1,o>l?u=o/l:s=l/o,n=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),i=Je(t),t.useProgram(i),f=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-u,-s,u,-s,-u,s,u,s]),t.STATIC_DRAW),h=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW),d=t.getAttribLocation(i,"a_position"),t.enableVertexAttribArray(d),t.bindBuffer(t.ARRAY_BUFFER,f),t.vertexAttribPointer(d,2,t.FLOAT,!1,0,0),v=t.getAttribLocation(i,"a_texCoord"),t.enableVertexAttribArray(v),t.bindBuffer(t.ARRAY_BUFFER,h),t.vertexAttribPointer(v,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.deleteTexture(n),t.deleteBuffer(f),t.deleteBuffer(h);case 31:case"end":return y.stop()}},e)})),j.apply(this,arguments)}function qe(e){var r=e.frames,a=e.canvasRef,t=e.currentFrame,o=(0,c.useRef)(null),l=(0,c.useCallback)(function(s){var n=a.current,i=o.current,f=r[s];n&&i&&f&&(i instanceof CanvasRenderingContext2D?Ge(f,n,i):Qe(f,n,i))},[a,r]),u=(0,c.useCallback)(function(){var s=a.current;if(s){o.current||(o.current=s.getContext("webgl")||s.getContext("2d"));var n=s.getBoundingClientRect(),i=n.width,f=n.height,h=window.devicePixelRatio||1;if(s.width=i*h,s.height=f*h,o.current&&o.current instanceof CanvasRenderingContext2D)o.current.scale(h,h);else{var d;(d=o.current)===null||d===void 0||d.viewport(0,0,s.width,s.height)}l(t)}},[a,t,l]);(0,c.useEffect)(function(){if(typeof window!="undefined")return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}},[u])}var er=function(r){var a=r.className,t=r.url,o=r.currentFrame,l=r.onTotalFrames,u=(0,c.useRef)(null),s=q({url:t}),n=s.frames;return(0,c.useEffect)(function(){return l==null?void 0:l(n)},[n]),qe({canvasRef:u,frames:n,currentFrame:o}),(0,x.jsx)("canvas",{className:a,ref:u})},rr=er;function tr(e,r){var a=(0,c.useRef)(),t=(0,c.useState)(e),o=D()(t,2),l=o[0],u=o[1],s=(0,c.useCallback)(function(i){clearTimeout(a.current),a.current=setTimeout(function(){return u(function(f){return typeof i=="function"?i(f):e})},r)},[r,e]),n=(0,c.useCallback)(function(i){a.current&&clearTimeout(a.current),u(function(f){return typeof i=="function"?i(f):e})},[e]);return[l,s,n]}var nr=tr;function ar(e){var r=function(){if(typeof window=="undefined")return{};var i={};return e.forEach(function(f){var h=window.localStorage.getItem(f);i[f]=h}),i},a=(0,c.useState)(r),t=D()(a,2),o=t[0],l=t[1],u=(0,c.useRef)(null);(0,c.useEffect)(function(){return typeof window!="undefined"&&(u.current=new BroadcastChannel("local-storage")),function(){var n;(n=u.current)===null||n===void 0||n.close()}},[]);var s=(0,c.useCallback)(function(n,i){if(!e.includes(n)){console.warn('[useLocalStorageKeys] key "'.concat(n,'" not managed by this hook.'));return}l(function(f){var h=S()(S()({},f),{},B()({},n,i));try{var d;i===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,i),(d=u.current)===null||d===void 0||d.postMessage({key:n,value:i})}catch(v){}return h})},[e]);return(0,c.useEffect)(function(){var n;function i(h){h.key&&e.includes(h.key)&&l(function(d){return S()(S()({},d),{},B()({},h.key,h.newValue))})}function f(h){var d=h.data||{},v=d.key,m=d.value;typeof v=="string"&&e.includes(v)&&l(function(y){return S()(S()({},y),{},B()({},v,m))})}return window.addEventListener("storage",i),(n=u.current)===null||n===void 0||n.addEventListener("message",f),function(){var h;window.removeEventListener("storage",i),(h=u.current)===null||h===void 0||h.removeEventListener("message",f)}},[e]),[o,s]}var ir=ar;function or(e,r,a){var t,o=(0,c.useRef)();return(0,c.useEffect)(function(){if(r.current)t=r.current;else if(r instanceof Element)t=r;else return;return o.current=new MutationObserver(function(l){l.forEach(function(u){e(u,o.current)})}),o.current.observe(t,a),function(){var l;t&&((l=o.current)===null||l===void 0||l.disconnect())}},[e,a,r]),function(){var l;!t||!o||(l=o.current)===null||l===void 0||l.disconnect()}}var ur=or,F=new WeakMap,$;function cr(e,r,a){var t=a!=null?a:{},o=t.needRequestAnimationFrame,l=o===void 0?!0:o,u;return(0,c.useEffect)(function(){if(u=r.current?r.current:r,!!u)return $||($=new ResizeObserver(function(s){s.forEach(function(n){var i=!!(l&&requestAnimationFrame);i?requestAnimationFrame(function(){return F.get(n.target)(n,$)}):F.get(n.target)(n,$)})})),F.set(u,e),$.observe(u),function(){u&&(F.delete(u),$.unobserve(u))}},[e,a]),function(){u&&(F.delete(u),$.unobserve(u))}}var Z=cr;function sr(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"both",a=e.parentElement;a;){if(r==="vertical"&&a.scrollHeight>a.clientHeight||r==="horizontal"&&a.scrollWidth>a.clientWidth||r==="both"&&(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth))return a;a=a.parentElement}return document.body}function lr(e){var r=e.top,a=r===void 0?0:r,t=e.left,o=t===void 0?0:t,l=e.direction,u=l===void 0?"vertical":l,s=(0,c.useRef)(null),n=(0,c.useRef)(null),i=(0,c.useRef)("0"),f=(0,c.useRef)("0");return(0,c.useLayoutEffect)(function(){var h;if(s.current){var d=(h=n.current)!==null&&h!==void 0?h:sr(s.current,u),v=d.getBoundingClientRect(),m=v.top,y=v.left,_=s.current.getBoundingClientRect(),R=_.top,T=_.left,M=function(){if(s.current){var b=d.scrollTop,E=d.scrollLeft,C=function(){return i.current=R-m-b<=a?"".concat(-R+m+b+a,"px"):"0px"},A=function(){return f.current=T-y-E<=o?"".concat(-T+y+E+o,"px"):"0px"};switch(u){case"vertical":C();break;case"horizontal":A();break;case"both":C(),A()}s.current.style.transform="translate(".concat(f.current,", ").concat(i.current,")")}},p=requestAnimationFrame?function(){return requestAnimationFrame(M)}:M;return d.addEventListener("scroll",p),function(){return d.removeEventListener("scroll",p)}}},[a]),{stickyElement:s,scrollElement:n}}var dr=lr,fr=[];function hr(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fr,t=(0,c.useRef)({fn:e,timer:null}),o=t.current;(0,c.useEffect)(function(){o.fn=e},[e]);var l=(0,c.useCallback)(function(){for(var u=arguments.length,s=new Array(u),n=0;n<u;n++)s[n]=arguments[n];o.timer||(o.timer=setTimeout(function(){clearTimeout(o.timer),o.timer=null,o.fn.apply(o,s)},r))},a);return l}var vr=hr;function mr(e,r){var a=(0,c.useRef)(),t=(0,c.useState)(e),o=D()(t,2),l=o[0],u=o[1],s=(0,c.useCallback)(function(i){a.current||(a.current=setTimeout(function(){clearTimeout(a.current),a.current=void 0,u(function(f){return typeof i=="function"?i(f):i})},r))},[r,e]),n=(0,c.useCallback)(function(i){a.current&&(clearTimeout(a.current),a.current=void 0),u(function(f){return typeof i=="function"?i(f):i})},[e]);return[l,s,n]}var gr=mr;function pr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.hotkeys,t=a===void 0?{}:a,o=r.seekStep,l=o===void 0?5:o,u=r.volumeStep,s=u===void 0?.1:u;(0,c.useEffect)(function(){if(e!=null&&e.current){var n=e.current;if(n){var i=S()({Space:function(d){d.paused?d.play():d.pause()},ArrowRight:function(d){d.currentTime=Math.min(d.duration,d.currentTime+l)},ArrowLeft:function(d){d.currentTime=Math.max(0,d.currentTime-l)},ArrowUp:function(d){d.volume=Math.min(1,d.volume+s)},ArrowDown:function(d){d.volume=Math.max(0,d.volume-s)},KeyM:function(d){d.muted=!d.muted}},t),f=function(d){var v=i[d.code];v&&(d.preventDefault(),v(n))};return window.addEventListener("keydown",f),function(){window.removeEventListener("keydown",f)}}}},[e,t,l,s])}var br=pr,yr=k(38275);function _r(e){if(!e.startsWith("data:image/"))return"Invalid base64 string";var r=e.substring(e.indexOf("image/")+6,e.indexOf(";"));switch(r){case"svg+xml":return"svg";case"x-icon":return"ico";case"vnd.microsoft.icon":return"ico";default:return r}}var re=_r;function Rr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.name,t=a===void 0?"image_":a,o=r.mimeType,l=r.chunkSize,u=l===void 0?5:l,s=1,n=0,i=function(v){var m=document.createElement("a");m.href=v,m.download="".concat(t).concat(s,".").concat(o!=null?o:re(v)),document.body.appendChild(m),m.click(),document.body.removeChild(m),s++},f=(0,yr.Z)(e,u),h=setInterval(function(){f[n].forEach(i),n+=1,n>f.length-1&&clearInterval(h)},1e3)}var Cr=Rr;function xr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"hex",r=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:255;return Math.floor(Math.random()*l)},a=function(){return r(360)},t=function(){return"".concat(r(100),"%")};switch(e){case"hex":return"#".concat(Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"));case"rgb":return"rgb(".concat(r(),",").concat(r(),", ").concat(r(),")");case"hsl":return"hsl(".concat(a(),",").concat(t(),"%, ").concat(t(),"%)");case"hsv":return"hsv(".concat(a(),",").concat(t(),"%, ").concat(t(),"%)");default:return"#000000"}}var Sr=xr;function Er(e){if(typeof e!="string"||e.trim().length===0)return!1;var r=/^data:image\/(png|jpeg|gif|bmp|svg\+xml|jpg|webp);base64,(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;return r.test(e)}var wr=Er}}]);
